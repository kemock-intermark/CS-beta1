# ‚úÖ ClubSuite WebApp - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### Guest –†–µ–∂–∏–º (–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

‚úÖ **–°–æ–±—ã—Ç–∏—è** - `/events`
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ

‚úÖ **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - `/book`
- –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥–æ—Å—Ç–µ–π
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

‚úÖ **–ú–æ–∏ –±–∏–ª–µ—Ç—ã** - `/my/tickets`
- –°–ø–∏—Å–æ–∫ –±–∏–ª–µ—Ç–æ–≤
- QR-–∫–æ–¥—ã —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- –°—Ç–∞—Ç—É—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

‚úÖ **Waitlist** - –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–µ—Å—Ç
- –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è

---

### Promoter –†–µ–∂–∏–º

‚úÖ **–ü–∞–Ω–µ–ª—å** - `/promoter`
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≥–æ—Å—Ç–µ–π
- –§–æ—Ä–º–∞ (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π)

‚úÖ **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä

‚úÖ **KPI Dashboard**
- –í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è (%)
- –ö–æ–º–∏—Å—Å–∏—è (total, pending)

---

### Door –†–µ–∂–∏–º (–ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö–æ–¥–∞)

‚úÖ **–°–∫–∞–Ω–µ—Ä QR** - `/door`
- –í–≤–æ–¥ QR-–∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
- –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –°—Ç–∞—Ç—É—Å (—É—Å–ø–µ—à–Ω–æ/–æ—à–∏–±–∫–∞)

‚úÖ **–ü–æ–∏—Å–∫** - —á–µ—Ä–µ–∑ API
- –ü–æ –∏–º–µ–Ω–∏/—Ç–µ–ª–µ—Ñ–æ–Ω—É

‚úÖ **–û—Ñ—Ñ–ª–∞–π–Ω-–∫—ç—à** - IndexedDB
- –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### Admin –†–µ–∂–∏–º

‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - `/admin`
- –°–æ–±—ã—Ç–∏—è (+ –î–æ–±–∞–≤–∏—Ç—å)
- –ü–∞–∫–µ—Ç—ã (+ –î–æ–±–∞–≤–∏—Ç—å)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

‚úÖ **–û—Ç—á—ë—Ç—ã**
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ú–µ—Ç—Ä–∏–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –†–æ–ª–∏

### JWT Authentication
```typescript
// Auth flow:
1. User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram
2. –ü–æ–ª—É—á–∞–µ—Ç initData
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /auth/tg/webapp/validate
4. Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT
5. JWT —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
6. Role –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ JWT payload
```

### –†–æ–ª–∏
- **guest** - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (default)
- **promoter** - –ø—Ä–æ–º–æ—É—Ç–µ—Ä
- **door** - –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö–æ–¥–∞
- **admin** - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### –†–æ—É—Ç–∏–Ω–≥ –ø–æ —Ä–æ–ª—è–º
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç–∏–Ω–≥:
guest ‚Üí /events
promoter ‚Üí /promoter
door ‚Üí /door
admin ‚Üí /admin
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Root layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx            # –ì–ª–∞–≤–Ω–∞—è —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ events/             # Guest: —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ book/               # Guest: –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ my/tickets/         # Guest: –º–æ–∏ –±–∏–ª–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ promoter/           # Promoter: –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ door/               # Door: —Å–∫–∞–Ω–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ admin/              # Admin: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ layout/
‚îÇ       ‚îú‚îÄ‚îÄ AppLayout.tsx   # Layout wrapper
‚îÇ       ‚îî‚îÄ‚îÄ Button.tsx      # Button component
‚îî‚îÄ‚îÄ lib/
    ‚îú‚îÄ‚îÄ auth.ts            # JWT auth
    ‚îú‚îÄ‚îÄ api-client.ts      # API –∫–ª–∏–µ–Ω—Ç
    ‚îî‚îÄ‚îÄ telegram.ts        # Telegram utils
```

---

## üé® UI/UX

### –î–∏–∑–∞–π–Ω
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π
- ‚úÖ Mobile-first
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π (Container, Grid, Flexbox)
- ‚úÖ Tailwind CSS

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ Button (primary/secondary/danger)
- ‚úÖ Card (—Å —Ç–µ–Ω—è–º–∏)
- ‚úÖ Loading states
- ‚úÖ Error states

---

## üîå API Integration

### –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

```typescript
// Auth
POST /auth/tg/webapp/validate

// Catalog
GET /catalog/events
GET /catalog/packages

// Reservations
POST /reservations
GET /reservations

// Tickets
POST /tickets
GET /tickets

// Payments
POST /payments/telegram/invoice

// Promoters
GET /promoters/me/kpi
POST /promoters/leads

// Checkin
POST /checkin/scan

// Reports
GET /reports/overview
```

---

## üì± Telegram Integration

### WebApp Features
- ‚úÖ Telegram WebApp SDK
- ‚úÖ initData validation
- ‚úÖ JWT authentication
- ‚úÖ Deep links
- ‚úÖ Menu button integration

### Deep Links
- `?action=book` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `?event=123` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
- `?ticket=456` - –±–∏–ª–µ—Ç
- `?qr=789` - QR-–∫–æ–¥

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
cd apps/webapp
pnpm install
pnpm dev
```

WebApp –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:3000`

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **JWT Authentication** - —Ç–æ–∫–µ–Ω—ã –≤ localStorage
2. **Role-based Routing** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ —Ä–æ–ª–∏
3. **Telegram WebApp** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
4. **QR Code Generation** - –¥–ª—è –±–∏–ª–µ—Ç–æ–≤
5. **Offline Support** - –≥–æ—Ç–æ–≤–æ –∫ IndexedDB
6. **Mobile-first** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
7. **API Integration** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üéâ WebApp –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ —Ä–µ–∂–∏–º—ã (Guest, Promoter, Door, Admin) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ.
